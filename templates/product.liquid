<!-- templates/product.liquid -->
<div itemscope itemtype="http://schema.org/Product">

	<meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
	<meta itemprop="image" content="{{ product.featured_image.src | img_url: 'grande' }}">

	<div class="breadcrumb">
		{% include 'breadcrumb' %}
	</div>

	<div class="product-page">
		<div class="row">
			<div class="columns small-12 medium-12 large-6">

				{% if settings.product_thumbnails_position == 'below' or product.images.size < 2 %}

					<div class="main-product-image">
						{% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
						<img src="{{ featured_image | img_url: '1024x1024' }}" alt="{{ featured_image.alt | escape }}"{% if settings.product_image_zoom_type == 'zoom-in' %} data-zoom="{{ featured_image | img_url: '1024x1024' }}"{% endif %} data-image-id="{{ featured_image.id }}">
					</div>

					{% if product.images.size > 1 %}

						<ul class="product-images row">
							{% for image in product.images %}
								<li class="columns large-4 medium-4 small-4">
									<a data-image-id="{{ image.id }}" href="{{ image.src | img_url: '1024x1024' }}">
										<img src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
									</a>
								</li>
							{% endfor %}
						</ul>

					{% endif %}

				{% else %}

					<div class="row">

						<div class="columns large-9 medium-9 small-9 main-product-image">
							{% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
							<img src="{{ featured_image | img_url: '1024x1024' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg"{% if settings.product_image_zoom_type == 'zoom-in' %} data-zoom="{{ featured_image | img_url: '1024x1024' }}"{% endif %} data-image-id="{{ featured_image.id }}">
						</div>

						<div class="columns large-3 medium-3 small-3">

							<ul class="product-images">
								{% for image in product.images %}
									<li>
										<a data-image-id="{{ image.id }}" href="{{ image.src | img_url: '1024x1024' }}" class="product-single__thumbnail">
											<img src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
										</a>
									</li>
								{% endfor %}
							</ul>

						</div>

					</div>

				{% endif %}

				{% if settings.product_image_zoom_type == 'lightbox' %}
				<ul class="gallery hidden">
					{% for image in product.images %}
					<li data-image-id="{{ image.id }}" class="gallery-item" data-mfp-src="{{ image | img_url: '1024x1024' }}"></li>
					{% endfor %}
				</ul>
				{% endif %}

			</div>
			<div class="columns large-6 medium-12 small-12">
				{% comment %}
					<h3 itemprop="brand">{{ product.vendor }}</h3>
				{% endcomment %}
				<h1 itemprop="name">{{ product.title }}</h1>

				<div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
					{% assign variant = product.selected_or_first_available_variant %}

					<meta itemprop="priceCurrency" content="{{ shop.currency }}">
					<link itemprop="availability" href="http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}">

					<div class="product-single__prices">
						<span id="ProductPrice" class="product-single__price" itemprop="price">
							{{ product.price | money }}
						</span>

						{% if product.compare_at_price > product.price %}
							<s id="ComparePrice" class="product-single__sale-price">
								{{ product.compare_at_price_max | money }}
							</s>
						{% endif %}
					</div>

					<form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
						<select name="id" class="product-variants">
							{% for variant in product.variants %}
								{% if variant.available %}

									<option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} data-sku="{{ variant.sku }}" value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>

								{% else %}
									<option disabled="disabled">
										{{ variant.title }} - {{ 'products.product.sold_out' | t }}
									</option>
								{% endif %}
							{% endfor %}
						</select>

						<div class="product-quantity{% unless settings.product_quantity_enable %} display-none{% endunless %}">
							<label>
								{{ 'products.product.quantity' | t }}
								<input type="number" name="quantity" value="1" min="1" class="quantity-selector">
							</label>
						</div>

						<button type="submit" name="add" class="button">
							<span class="add-to-cart-text">{{ 'products.product.add_to_cart' | t }}</span>
						</button>
					</form>

					<div class="product-description rte" itemprop="description">
						{{ product.description }}
					</div>

					{% if settings.social_sharing_products %}
						<hr>
						{% include 'social-sharing' %}
					{% endif %}
				</div>

			</div>
		</div>
	</div>

	{% if settings.product_related_enable %}
		{% include 'related-products' %}
	{% endif %}

</div>

{{ 'option_selection.js' | shopify_asset_url | script_tag }}
<script>
	var selectCallback = function(variant, selector) {
		timber.productPage({
			money_format: "{{ shop.money_format }}",
			variant: variant,
			selector: selector,
			translations: {
				add_to_cart : "{{ 'products.product.add_to_cart' | t }}",
				sold_out : "{{ 'products.product.sold_out' | t }}",
				unavailable : "{{ 'products.product.unavailable' | t }}"
			}
		});
	};

	jQuery(function($) {
		new Shopify.OptionSelectors('productSelect', {
			product: {{ product | json }},
			onVariantSelected: selectCallback,
			enableHistoryState: true
		});

		// Add label if only one product option and it isn't 'Title'. Could be 'Size'.
		{% if product.options.size == 1 and product.options.first != 'Title' %}
			$('.selector-wrapper:eq(0)').prepend('<label for="productSelect-option-0">{{ product.options.first | escape }}</label>');
		{% endif %}

		// Hide selectors if we only have 1 variant and its title contains 'Default'.
		{% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}
			$('.selector-wrapper').hide();
		{% endif %}
	});
</script>
<!-- end templates/product.liquid -->